<div class="modal-overlay" (click)="closeModal()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h2>Add New Student</h2>
      <button class="close-button" (click)="closeModal()">&times;</button>
    </div>

    <form [formGroup]="studentForm" (ngSubmit)="onSubmit()" class="student-form">
      <div class="form-group">
        <label for="firstName">First Name</label>
        <input
          type="text"
          id="firstName"
          formControlName="firstName"
          placeholder="Enter first name"
        />
        <div class="error-message" *ngIf="studentForm.get('firstName')?.errors?.['required'] && studentForm.get('firstName')?.touched">
          First name is required
        </div>
      </div>

      <div class="form-group">
        <label for="lastName">Last Name</label>
        <input
          type="text"
          id="lastName"
          formControlName="lastName"
          placeholder="Enter last name"
        />
        <div class="error-message" *ngIf="studentForm.get('lastName')?.errors?.['required'] && studentForm.get('lastName')?.touched">
          Last name is required
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="Enter email"
        />
        <div class="error-message" *ngIf="studentForm.get('email')?.errors?.['required'] && studentForm.get('email')?.touched">
          Email is required
        </div>
        <div class="error-message" *ngIf="studentForm.get('email')?.errors?.['email'] && studentForm.get('email')?.touched">
          Please enter a valid email
        </div>
        <div class="error-message" *ngIf="studentForm.get('email')?.errors?.['emailExists']">
          This email is already registered
        </div>
      </div>

      <div class="form-group">
        <label for="phoneNumber">Phone Number</label>
        <input
          type="tel"
          id="phoneNumber"
          formControlName="phoneNumber"
          placeholder="Enter phone number"
        />
        <div class="error-message" *ngIf="studentForm.get('phoneNumber')?.errors?.['required'] && studentForm.get('phoneNumber')?.touched">
          Phone number is required
        </div>
        <div class="error-message" *ngIf="studentForm.get('phoneNumber')?.errors?.['phoneExists']">
          This phone number is already registered
        </div>
      </div>

      <div class="form-group">
        <label for="course">Course</label>
        <select id="course" formControlName="course">
          <option value="">Select a course</option>
          <option *ngFor="let course of courses" [value]="course.id">
            {{ course.name }}
          </option>
        </select>
        <div class="error-message" *ngIf="studentForm.get('course')?.errors?.['required'] && studentForm.get('course')?.touched">
          Course is required
        </div>
      </div>

      <div class="form-group">
        <label for="incharge">Course Incharge</label>
        <select id="incharge" formControlName="incharge">
          <option value="">Select an incharge</option>
          <option *ngFor="let incharge of incharges" [value]="incharge.id">
            {{ incharge.name }}
          </option>
        </select>
        <div class="error-message" *ngIf="studentForm.get('incharge')?.errors?.['required'] && studentForm.get('incharge')?.touched">
          Course incharge is required
        </div>
      </div>

      <div class="error-message" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <div class="form-actions">
        <button type="button" class="cancel-button" (click)="closeModal()">Cancel</button>
        <button type="submit" class="submit-button" [disabled]="studentForm.invalid || isLoading">
          {{ isLoading ? 'Adding...' : 'Add Student' }}
        </button>
      </div>
    </form>
  </div>
</div> 